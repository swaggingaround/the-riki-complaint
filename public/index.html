<!DOCTYPE html>
<html>
  <head>
    <title>Login - The Riki Complaint</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div class="dark-toggle-container">
      <span class="dark-toggle-label">Dark Mode</span>
      <label class="switch">
        <input type="checkbox" id="darkModeToggle">
        <span class="slider"></span>
      </label>
    </div>

    <div class="login-box">
      <h2>Complaint Portal for my Prince</h2>
      <form action="/login" method="POST">
        <input type="text" name="username" placeholder="Username" required />
        <input type="password" name="password" placeholder="Password" required />
        <button type="submit">Login</button>
      </form>
    </div>

    <script>
      // Dark mode toggle
      document.addEventListener('DOMContentLoaded', () => {
        const toggle = document.getElementById('darkModeToggle');
        if (!toggle) {
          console.error('darkModeToggle not found!');
          return;
        }

        // Carica lo stato del dark mode da localStorage
        const dark = localStorage.getItem('darkMode') === 'true';
        document.body.classList.toggle('dark-mode', dark);
        toggle.checked = dark;
        console.log('Initial dark mode state:', dark);

        toggle.addEventListener('change', () => {
          document.body.classList.toggle('dark-mode');
          const isDarkMode = document.body.classList.contains('dark-mode');
          localStorage.setItem('darkMode', isDarkMode); // Salva lo stato
          console.log('Dark mode toggled:', isDarkMode);
        });
      });
    </script>
  </body>
</html>